<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Image Processing # Contexto # Aplicar sobre una zona el kernel seleccionado, o aplicar un kernel personalizado sobre una imagen o un video
Resultados y Código (Solución) # Deslice el mouse sobre el canvas para aplicar el shader en la zona. En la esquina superior derecha puede ajustar el kernel. En la esquina superior derecha puede seleccionar entre la imagen y el video. imgprocess.js let image; let video; let videoCheck; let maskOption; let shaderMask; let mask = [0, -1, 0, -1, 5, -1, 0, -1, 0] let input = [9]; let button; let selectorFigure; function preload() { video = createVideo(['/showcase/sketches/imgprocess/dogs."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Image Processing # Contexto # Aplicar sobre una zona el kernel seleccionado, o aplicar un kernel personalizado sobre una imagen o un video
Resultados y Código (Solución) # Deslice el mouse sobre el canvas para aplicar el shader en la zona. En la esquina superior derecha puede ajustar el kernel. En la esquina superior derecha puede seleccionar entre la imagen y el video. imgprocess.js let image; let video; let videoCheck; let maskOption; let shaderMask; let mask = [0, -1, 0, -1, 5, -1, 0, -1, 0] let input = [9]; let button; let selectorFigure; function preload() { video = createVideo(['/showcase/sketches/imgprocess/dogs."><meta property="og:type" content="article"><meta property="og:url" content="https://icquirogac.github.io/showcase/docs/Talleres/Shaders/Image-Processing/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2022-06-27T22:20:26-05:00"><title>Image Processing | Computacion Visual 2022-I</title><link rel=manifest href=/showcase/manifest.json><link rel=icon href=/showcase/favicon.png type=image/x-icon><link rel=stylesheet href=/showcase/book.min.ab46de3e725a6415339a37bba23a0067534a37289b063c9f8d011515a63097a8.css integrity="sha256-q0bePnJaZBUzmje7ojoAZ1NKNyibBjyfjQEVFaYwl6g=" crossorigin=anonymous><script defer src=/showcase/flexsearch.min.js></script>
<script defer src=/showcase/en.search.min.bf0ab4485cc99db16d65d40bee13266e7b176ecbd287e02fcbaacd66bcb01987.js integrity="sha256-vwq0SFzJnbFtZdQL7hMmbnsXbsvSh+Avy6rNZrywGYc=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/showcase/><span>Computacion Visual 2022-I</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li class=book-section-flat><span>Talleres</span><ul><li><input type=checkbox id=section-43b7d847c7d1abc7c0759ec5b27712e8 class=toggle>
<label for=section-43b7d847c7d1abc7c0759ec5b27712e8 class="flex justify-between"><a href=/showcase/docs/Talleres/Actividades/>Actividades</a></label><ul><li><a href=/showcase/docs/Talleres/Actividades/Solidos_Platonicos/>Solidos Platonicos</a></li></ul></li><li><input type=checkbox id=section-8269a9a56f31dd363e72c7c9cb370ab6 class=toggle>
<label for=section-8269a9a56f31dd363e72c7c9cb370ab6 class="flex justify-between"><a href=/showcase/docs/Talleres/Ilusiones/>Ilusiones</a></label><ul><li><a href=/showcase/docs/Talleres/Ilusiones/Masking/>Masking</a></li><li><a href=/showcase/docs/Talleres/Ilusiones/Stepping_Feet/>Stepping Feet</a></li></ul></li><li><input type=checkbox id=section-8496ceebe33d68d3b2255db0b4f93788 class=toggle>
<label for=section-8496ceebe33d68d3b2255db0b4f93788 class="flex justify-between"><a role=button>Rendering</a></label><ul><li><a href=/showcase/docs/Talleres/Rendering/Anti-aliasing/>Anti Aliasing</a></li></ul></li><li><input type=checkbox id=section-8c05fcea50aae771d78a596c668026de class=toggle>
<label for=section-8c05fcea50aae771d78a596c668026de class="flex justify-between"><a role=button>Scene Trees</a></label><ul><li><a href=/showcase/docs/Talleres/Scene-Trees/Main_Spaces/>Main Spaces</a></li></ul></li><li><input type=checkbox id=section-405e936283de4a59db86619cf301ce41 class=toggle checked>
<label for=section-405e936283de4a59db86619cf301ce41 class="flex justify-between"><a role=button>Shaders</a></label><ul><li><a href=/showcase/docs/Talleres/Shaders/Ejercicios/>Ejercicios</a></li><li><a href=/showcase/docs/Talleres/Shaders/Image-Processing/ class=active>Image Processing</a></li><li><a href=/showcase/docs/Talleres/Shaders/Texturing/>Texturing</a></li></ul></li></ul></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/showcase/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Image Processing</strong>
<label for=toc-control><img src=/showcase/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#image-processing>Image Processing</a><ul><li><a href=#contexto>Contexto</a></li><li><a href=#resultados-y-código-solución>Resultados y Código (Solución)</a></li><li><a href=#discusión>Discusión</a></li><li><a href=#conclusiones>Conclusiones</a><ul><li><a href=#referencias>Referencias</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=image-processing>Image Processing
<a class=anchor href=#image-processing>#</a></h1><h2 id=contexto>Contexto
<a class=anchor href=#contexto>#</a></h2><p>Aplicar sobre una zona el kernel seleccionado, o aplicar un kernel personalizado sobre una imagen o un video</p><h2 id=resultados-y-código-solución>Resultados y Código (Solución)
<a class=anchor href=#resultados-y-c%c3%b3digo-soluci%c3%b3n>#</a></h2><ul><li>Deslice el mouse sobre el canvas para aplicar el shader en la zona.</li><li>En la esquina superior derecha puede ajustar el kernel.</li><li>En la esquina superior derecha puede seleccionar entre la imagen y el video.</li></ul><details><summary>imgprocess.js</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>image</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>video</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>videoCheck</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>maskOption</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>shaderMask</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>mask</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>5</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>input</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>button</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>let</span> <span style=color:#a6e22e>selectorFigure</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>preload</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createVideo</span>([<span style=color:#e6db74>&#39;/showcase/sketches/imgprocess/dogs.webm&#39;</span>]);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>hide</span>(); <span style=color:#75715e>// by default video shows up in separate dom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>shaderMask</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadShader</span>(<span style=color:#e6db74>&#39;/showcase/sketches/imgprocess/shader.vert&#39;</span>, <span style=color:#e6db74>&#39;/showcase/sketches/imgprocess/mask.frag&#39;</span>);
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>image</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>loadImage</span>(<span style=color:#e6db74>&#39;/showcase/sketches/imgprocess/test.jpg&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#75715e>// image = loadImage(&#39;/showcase/sketches/imgprocess/test2.jpg&#39;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// image = loadImage(&#39;/showcase/sketches/imgprocess/test3.jpeg&#39;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>// image = loadImage(&#39;/showcase/sketches/imgprocess/test4.jpg&#39;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>setup</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// shaders require WEBGL mode to work
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>createCanvas</span>(<span style=color:#ae81ff>700</span>, <span style=color:#ae81ff>550</span>, <span style=color:#a6e22e>WEBGL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>noStroke</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>textureMode</span>(<span style=color:#a6e22e>NORMAL</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>videoCheck</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;video&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>videoCheck</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>videoCheck</span> .<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>videoCheck</span>.<span style=color:#a6e22e>checked</span>()) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>video</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>loop</span>();
</span></span><span style=display:flex><span>    } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>image</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>video</span>.<span style=color:#a6e22e>pause</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>videoCheck</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>40</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maskOption</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createCheckbox</span>(<span style=color:#e6db74>&#39;options&#39;</span>, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maskOption</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>640</span>, <span style=color:#ae81ff>20</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maskOption</span>.<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;color&#39;</span>, <span style=color:#e6db74>&#39;white&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>maskOption</span>.<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>maskOption</span>.<span style=color:#a6e22e>checked</span>()) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>inp</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>input</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>inp</span>].<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>show</span>();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>inp</span> <span style=color:#66d9ef>in</span> <span style=color:#a6e22e>input</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>inp</span>].<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shader</span>(<span style=color:#a6e22e>shaderMask</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;texture&#39;</span>, <span style=color:#a6e22e>image</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>emitTexOffset</span>(<span style=color:#a6e22e>shaderMask</span>, <span style=color:#a6e22e>image</span>, <span style=color:#e6db74>&#39;texOffset&#39;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;radius&#39;</span>, <span style=color:#ae81ff>50</span><span style=color:#f92672>*</span><span style=color:#a6e22e>pixelDensity</span>());
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;u_resolution&#39;</span>, [<span style=color:#a6e22e>width</span><span style=color:#f92672>*</span><span style=color:#a6e22e>pixelDensity</span>(), <span style=color:#a6e22e>height</span><span style=color:#f92672>*</span><span style=color:#a6e22e>pixelDensity</span>()]);
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>j</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>j</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>; <span style=color:#a6e22e>j</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>createInput</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>200</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>j</span><span style=color:#f92672>*</span><span style=color:#ae81ff>50</span>), <span style=color:#ae81ff>200</span><span style=color:#f92672>+</span>(<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>50</span>));
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;text-align:center&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>style</span>(<span style=color:#e6db74>&#39;font-size:16px&#39;</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>size</span>(<span style=color:#ae81ff>42</span>,<span style=color:#ae81ff>44</span>);
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>].<span style=color:#a6e22e>value</span>(<span style=color:#a6e22e>mask</span>[<span style=color:#a6e22e>i</span><span style=color:#f92672>*</span><span style=color:#ae81ff>3</span><span style=color:#f92672>+</span><span style=color:#a6e22e>j</span>]);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createButton</span>(<span style=color:#e6db74>&#39;Aplicar&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>265</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>mousePressed</span>(<span style=color:#a6e22e>apply</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>button</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createSelect</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>position</span>(<span style=color:#ae81ff>400</span>, <span style=color:#ae81ff>230</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Sharpen&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Ridge detection&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Blur&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Personalized&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>option</span>(<span style=color:#e6db74>&#39;Identity&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>selected</span>(<span style=color:#e6db74>&#39;Sharpen&#39;</span>);
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>hide</span>();
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>changed</span>(() =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>switch</span>(<span style=color:#a6e22e>selectorFigure</span>.<span style=color:#a6e22e>value</span>()){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Sharpen&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>changeInputs</span>([<span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>5</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Ridge detection&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>changeInputs</span>([<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>8</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>, <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Blur&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>changeInputs</span>([<span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>, <span style=color:#ae81ff>1</span><span style=color:#f92672>/</span><span style=color:#ae81ff>9</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Identity&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>changeInputs</span>([<span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>]);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;Personalized&#34;</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>apply</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  });
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>changeInputs</span>(<span style=color:#a6e22e>masks</span>){
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>9</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>input</span>[<span style=color:#a6e22e>i</span>].<span style=color:#a6e22e>value</span>(<span style=color:#a6e22e>masks</span>[<span style=color:#a6e22e>i</span>]);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>apply</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>apply</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mask</span> <span style=color:#f92672>=</span> [parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>0</span>].<span style=color:#a6e22e>value</span>()), parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>1</span>].<span style=color:#a6e22e>value</span>()), parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>2</span>].<span style=color:#a6e22e>value</span>()), 
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>3</span>].<span style=color:#a6e22e>value</span>()), parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>4</span>].<span style=color:#a6e22e>value</span>()), parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>5</span>].<span style=color:#a6e22e>value</span>()),
</span></span><span style=display:flex><span>          parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>6</span>].<span style=color:#a6e22e>value</span>()), parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>7</span>].<span style=color:#a6e22e>value</span>()), parseFloat(<span style=color:#a6e22e>input</span>[<span style=color:#ae81ff>8</span>].<span style=color:#a6e22e>value</span>())]
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>reset</span>() {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>mask</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createQuadrille</span>([[<span style=color:#ae81ff>0.0625</span>, <span style=color:#ae81ff>0.125</span>, <span style=color:#ae81ff>0.0625</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0.125</span>,  <span style=color:#ae81ff>0.25</span>,  <span style=color:#ae81ff>0.125</span>],
</span></span><span style=display:flex><span>        [<span style=color:#ae81ff>0.0625</span>, <span style=color:#ae81ff>0.125</span>, <span style=color:#ae81ff>0.0625</span>]]);
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>maskOption</span>.<span style=color:#a6e22e>checked</span>()){
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#e6db74>&#39;#060621&#39;</span>);
</span></span><span style=display:flex><span>  }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>background</span>(<span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;mask&#39;</span>, <span style=color:#a6e22e>mask</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>shaderMask</span>.<span style=color:#a6e22e>setUniform</span>(<span style=color:#e6db74>&#39;u_mouse&#39;</span>, [<span style=color:#a6e22e>mouseX</span><span style=color:#f92672>*</span><span style=color:#a6e22e>pixelDensity</span>(), (<span style=color:#a6e22e>height</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>mouseY</span>)<span style=color:#f92672>*</span><span style=color:#a6e22e>pixelDensity</span>()]);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>cover</span>(<span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>quad</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>cover</span>(<span style=color:#a6e22e>texture</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>beginShape</span>();
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>texture</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vertex</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>width</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>height</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>0</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>endShape</span>(<span style=color:#a6e22e>CLOSE</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>mask.frag</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>mediump</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>u_resolution</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>u_mouse</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>radius</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// we need our interpolated color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>vVertexColor</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// we need our interpolated tex coord
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>vTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>sampler2D</span> <span style=color:#a6e22e>texture</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>texOffset</span>;
</span></span><span style=display:flex><span><span style=color:#75715e>// holds the 3x3 kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>mask</span>[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>float</span> <span style=color:#a6e22e>pct</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>distance</span>(<span style=color:#a6e22e>gl_FragCoord</span>.<span style=color:#a6e22e>xy</span>, <span style=color:#a6e22e>u_mouse</span>);
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>pct</span> <span style=color:#f92672>&gt;=</span> <span style=color:#a6e22e>radius</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>vTexCoord</span>) <span style=color:#f92672>*</span> <span style=color:#a6e22e>vVertexColor</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 1. Use offset to move along texture space.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>// In this case to find the texcoords of the texel neighbours.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc0</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc1</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc2</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc3</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#75715e>// origin (current fragment texcoords)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc4</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc5</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>,          <span style=color:#ae81ff>0.0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc6</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>-</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc7</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(         <span style=color:#ae81ff>0.0</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>tc8</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vec2</span>(<span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>s</span>, <span style=color:#f92672>+</span><span style=color:#a6e22e>texOffset</span>.<span style=color:#a6e22e>t</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 2. Sample texel neighbours within the rgba array
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>9</span>];
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc0</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc1</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc2</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc3</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>4</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc4</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>5</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc5</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>6</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc6</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>7</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc7</span>);
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>rgba</span>[<span style=color:#ae81ff>8</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>texture2D</span>(<span style=color:#a6e22e>texture</span>, <span style=color:#a6e22e>tc8</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 3. Apply convolution kernel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>convolution</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> (<span style=color:#66d9ef>int</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>9</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>convolution</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>rgba</span>[<span style=color:#a6e22e>i</span>]<span style=color:#f92672>*</span><span style=color:#a6e22e>mask</span>[<span style=color:#a6e22e>i</span>];
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 4. Set color from convolution
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>gl_FragColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>convolution</span>.<span style=color:#a6e22e>rgb</span>, <span style=color:#ae81ff>1.0</span>); 
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><details><summary>shader.vert</summary><div class=markdown-inner><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Precision seems mandatory in webgl
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>precision</span> <span style=color:#a6e22e>highp</span> <span style=color:#66d9ef>float</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 1. Attributes and uniforms sent by p5.js
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Vertex attributes and some uniforms are sent by
</span></span></span><span style=display:flex><span><span style=color:#75715e>// p5.js following these naming conventions:
</span></span></span><span style=display:flex><span><span style=color:#75715e>// https://github.com/processing/p5.js/blob/main/contributor_docs/webgl_mode_architecture.md
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 1.1. Attributes
</span></span></span><span style=display:flex><span><span style=color:#75715e>// vertex position attribute
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec3</span> <span style=color:#a6e22e>aPosition</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// vertex texture coordinate attribute
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>aTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// vertex color attribute
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>attribute</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>aVertexColor</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 1.2. Matrix uniforms
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// The vertex shader should project the vertex position into clip space:
</span></span></span><span style=display:flex><span><span style=color:#75715e>// vertex_clipspace = vertex * projection * view * model (see the gl_Position below)
</span></span></span><span style=display:flex><span><span style=color:#75715e>// Details here: http://visualcomputing.github.io/Transformations
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Either a perspective or an orthographic projection
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>mat4</span> <span style=color:#a6e22e>uProjectionMatrix</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// modelview = view * model
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>uniform</span> <span style=color:#a6e22e>mat4</span> <span style=color:#a6e22e>uModelViewMatrix</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// B. varying variable names are defined by the shader programmer:
</span></span></span><span style=display:flex><span><span style=color:#75715e>// vertex color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec4</span> <span style=color:#a6e22e>vVertexColor</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// vertex texcoord
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>varying</span> <span style=color:#a6e22e>vec2</span> <span style=color:#a6e22e>vTexCoord</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// copy / interpolate color
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>vVertexColor</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>aVertexColor</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>// copy / interpolate texcoords
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>vTexCoord</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>aTexCoord</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>// vertex projection into clipspace
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>gl_Position</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>uProjectionMatrix</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>uModelViewMatrix</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>vec4</span>(<span style=color:#a6e22e>aPosition</span>, <span style=color:#ae81ff>1.0</span>);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div></details><iframe id=imgprocess style=width:720px;height:576px srcdoc="
        <!DOCTYPE html>
        <html>
          <head>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/p5.min.js></script>
            <script src=https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.1/addons/p5.sound.min.js></script>
            <script src=https://cdn.jsdelivr.net/gh/objetos/p5.quadrille.js/p5.quadrille.js></script>
             <script src=https://cdn.jsdelivr.net/gh/freshfork/p5.EasyCam@1.2.1/p5.easycam.js></script> 
             <script src=https://cdn.jsdelivr.net/gh/VisualComputing/p5.treegl/p5.treegl.js></script> 
            
            
            
            <script src=/showcase/sketches/imgprocess/imgprocess.js></script>
          </head>
          <body>
          </body>
        </html>
      "></iframe><h2 id=discusión>Discusión
<a class=anchor href=#discusi%c3%b3n>#</a></h2><ul><li>Utilizando mascaras de convolucion adecuadas se podrian a llegar a detectar objetos, sin el uso de machine learning</li></ul><h2 id=conclusiones>Conclusiones
<a class=anchor href=#conclusiones>#</a></h2><ul><li>El procesamiento en tiempo real de una imagen puede ser muy util sobre todo en el area de la salud</li><li>El uso de la GPU con la libreria de WEBGL permite que el procesamiento en tiempo real de una imagen o video sea fluidos</li></ul><h3 id=referencias>Referencias
<a class=anchor href=#referencias>#</a></h3><ul><li>Jean Pierre Charalambos. p5.treegl.js. <a href=https://github.com/VisualComputing/p5.treegl>https://github.com/VisualComputing/p5.treegl</a></li><li>Wikipedia. Kernel (image processing). <a href=https://en.wikipedia.org/wiki/Kernel_%28image_processing%29>https://en.wikipedia.org/wiki/Kernel_%28image_processing%29</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/visualcomputing/showcase/commit/c81b79b2aba61166b6e15a17d8419a1487fb0f9e title='Last modified by icquirogac | June 28, 2022' target=_blank rel=noopener><img src=/showcase/svg/calendar.svg class=book-icon alt=Calendar>
<span>June 28, 2022</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#image-processing>Image Processing</a><ul><li><a href=#contexto>Contexto</a></li><li><a href=#resultados-y-código-solución>Resultados y Código (Solución)</a></li><li><a href=#discusión>Discusión</a></li><li><a href=#conclusiones>Conclusiones</a><ul><li><a href=#referencias>Referencias</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>